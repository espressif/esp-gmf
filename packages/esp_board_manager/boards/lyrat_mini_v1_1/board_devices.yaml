board: esp32_lyrat_mini_v1_1
chip: esp32
version: 1.0.0
# Devices Configuration
devices:
  # Power Control for SD Card
  - name: sdcard_power_ctrl
    type: power_ctrl
    sub_type: gpio
    config:
      peripherals:
        - name: gpio_sd_power
          active_level: 0

  # Audio Codec (ES8311) - DAC for audio output
  - name: audio_dac
    chip: es8311
    type: audio_codec
    version: default
    config:
      dac_enabled: true
      dac_max_channel: 1
      dac_channel_mask: "1"        # Left channel enable
      mclk_enabled: false
      aec: false
    peripherals:
      - name: gpio_power_amp
        gain: 20                   # BOARD_PA_GAIN (dB)
        active_level: 1            # High level active
      - name: i2s_audio_out
      - name: i2c_master
        address: 0x30              # ES8311 I2C address,  0x18 << 1 = 0x30
        frequency: 100000          # 100kHz I2C frequency

  # Audio ADC (ES7243/ES7243E) - ADC for audio input
  - name: audio_adc
    chip: es7243e      # Some old boards use ES7243, ES7243 is EOL
    type: audio_codec
    version: default
    config:
      adc_enabled: true
      adc_max_channel: 2
      adc_channel_mask: "11"             # Left, Right channel enable
      adc_channel_labels: ['RE', 'FL']   # Reference channel, Front channel
      mclk_enabled: true
      aec: false
    peripherals:
      - name: i2s_audio_in
      - name: i2c_master
        address: 0x20              # ES7243E I2C address (0x26 for ES7243)
        frequency: 100000          # 100kHz I2C frequency

  # SD Card (FATFS)
  - name: fs_sdcard
    type: fatfs_sdcard
    version: default
    config:
      mount_point: "/sdcard"
      vfs_config:
        max_files: 5
      bus_width: 1                 # 1-line mode only
      pins:
        clk: 14
        cmd: 15
        d0: 2
    power_ctrl_device: sdcard_power_ctrl

  # ADC Button Devices Configuration for multiple buttons
  - name: adc_button_group
    type: button
    sub_type: adc
    config:
      long_press_time: 2000
      short_press_time: 100
      button_num: 6
      max_voltage: 3000
      voltage_range: [380, 820, 1180, 1570, 1980, 2410]
      button_labels: ["VOLUME_UP", "VOLUME_DOWN", "SET", "PLAY", "Mode", "REC"]
    peripherals:
    - name: adc_button
