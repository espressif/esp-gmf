board: esp32_s3_korvo2l
chip: esp32s3
version: 1.0.0
# Devices Configuration
devices:
  - name: audio_dac
    chip: es8311
    type: audio_codec
    version: default
    config: &es8311_config
      adc_enabled: true
      adc_max_channel: 1
      # The channel mask, 1-enable, 0-disable
      # e.g.“0111”, bit0: Mic0 enable, bit1: Mic1 enable, bit2: Mic2 enable, bit3: Mic3 enable, bit4: Mic4 disable
      adc_channel_mask: "1"            # Mic0 enable
      adc_channel_labels: ['RE','FC']  # Mic0 and reference enable, MSB ~ LSB

      dac_enabled: true
      dac_max_channel: 1
      # DAC channel mask, 1-enable, 0-disable, layout: left,right
      dac_channel_mask: "1"     # Left enable

    # Power amplifier configuration
    peripherals: &es8311_peripherals
      - name: gpio_pa_control
        gain: 6                    # dB
        active_level: 1            # 0-low, 1-high

      # I2S interface configuration
      - name: i2s_audio_out
      # I2C interface configuration
      - name: i2c_master
        address: 0x30
        frequency: 400000          # Hz

  - name: audio_adc
    chip: es8311
    type: audio_codec
    version: default
    config: *es8311_config
    # Power amplifier configuration
    peripherals:
      - *es8311_peripherals
      # override i2s_audio_in
      - name: i2s_audio_in

  # - name: fs_sdcard
  #   type: fatfs_sdcard
  #   version: default
  #   config:
  #     bus_width: 1            # 1, 4, 8, not used on SPI type
  #     pins:
  #       clk: 6    #
  #       cmd: 7    #
  #       d0: 4     #

  - name: fatfs          # The name of the device, must be unique
    type: fs_fat          # The type of the device, must be unique
    version: default
    sub_type: sdmmc
    config:
      sub_config:
        bus_width: 1                      # Bus width: 1, 4, or 8 bits
        # GPIO pin configuration
        pins:
          clk: 6                         # Clock pin (-1 for not used)
          cmd: 7                         # Command pin (-1 for not used)
          d0: 4                          # Data line 0 pin (-1 for not used)

  - name: fs_spiffs          # The name of the device, must be unique
    type: fs_spiffs          # The type of the device, must be unique
    version: 1.0.0
    config:
      partition_label: NULL           # The partition label for the SPIFFS filesystem
      format_if_mount_failed: true

  - name: my_custom_sensor         # The name of the device, must be unique
    type: custom                   # The type of the device, must be unique
    chip: esp32s3                  # Optional: Name of chip
    version: default               # Optional: Parser version to use
    init_skip: false               # Optional: skip initialization when the manager initializes all devices
    config:
      # Custom configuration parameters - these will be automatically generated as struct fields
      sensor_id: 0x01              # Sensor ID (hex format)
      sample_rate: 100             # Sample rate in Hz
      enable_filter: true          # Enable digital filter
      filter_cutoff: 50.5          # Filter cutoff frequency in Hz
      timeout_ms: 1000             # Timeout in milliseconds
      debug_mode: false            # Enable debug mode
    peripherals:                   # Optional: List of used peripherals
      - name: i2c_master           # I2C peripheral for communication
      - name: gpio_pa_control      # GPIO peripheral for control
